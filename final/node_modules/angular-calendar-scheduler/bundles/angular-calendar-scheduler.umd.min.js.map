{"version":3,"sources":["null","ng://angular-calendar-scheduler/modules/scheduler/scheduler.module.ts","ng://angular-calendar-scheduler/modules/scheduler/scheduler-config.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-view.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-cell.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-header.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-event.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-event-title.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-event-content.component.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-scheduler-event-actions.component.ts","ng://angular-calendar-scheduler/modules/scheduler/formatters/scheduler-event-title-formatter.provider.ts","ng://angular-calendar-scheduler/modules/scheduler/pipes/scheduler-event-title.pipe.ts","ng://angular-calendar-scheduler/modules/scheduler/formatters/scheduler-date-formatter.provider.ts","ng://angular-calendar-scheduler/modules/scheduler/calendar-utils.ts"],"names":["__extends","d","b","__","this","constructor","extendStatics","prototype","Object","create","provideAuthConfig","config","SchedulerConfig","use","source","defaultValue","undefined","locale","headerDateFormat","Injectable","WEEKEND_DAY_NUMBERS","CalendarSchedulerViewComponent","cdr","EventEmitter","ngOnInit","_this","refresh","refreshSubscription","subscribe","refreshAll","markForCheck","ngOnChanges","changes","hours","getSchedulerViewHourGrid","viewDate","hourSegments","dayStart","hour","dayStartHour","minute","dayStartMinute","dayEnd","dayEndHour","dayEndMinute","excludeDays","refreshHeader","events","refreshBody","ngOnDestroy","unsubscribe","toggleSegmentHighlight","event","isHighlighted","days","forEach","day","segments","filter","segment","some","ev","id","start","getDay","e","backgroundColor","color","secondary","headerDays","getSchedulerViewDays","weekStartsOn","startsWithToday","excluded","view","getSchedulerView","dayModifier","hourModifier","segmentModifier","args","precision","startOfViewWeek","startOfDay","startOfWeek","endOfViewWeek","addDays","endOfDay","endOfWeek","eventsInWeek","getEventsInPeriod","periodStart","periodEnd","dayIndex","hourIndex","segmentIndex","date","setDate","setMonth","setYear","getFullYear","getMonth","getDate","startOfSegment","endOfSegment","addMinutes","evts","map","end","title","content","actions","status","cssClass","startsBeforeSegment","endsAfterSegment","isHovered","isDisabled","isClickable","push","Date","hasBorder","hourDate","getHours","isEventInPeriod","eventStart","eventEnd","isSameSecond","subSeconds","loop","i","getSchedulerDay","today","isPast","isToday","isSameDay","isFuture","isWeekend","indexOf","startOfView","setMinutes","setHours","endOfView","startOfMinute","segmentDuration","startOfViewDay","Array","from","length","v","k","range","j","addHours","isStart","Component","selector","template","styles","encapsulation","ViewEncapsulation","None","ChangeDetectorRef","Inject","LOCALE_ID","Input","Output","moment","momentImported","CalendarSchedulerCellComponent","format","onMouseEnter","mouseEvent","highlightSegment","emit","onMouseLeave","unhighlightSegment","onSegmentClick","stopPropagation","segmentClicked","onEventClick","eventClicked","host","class","[class.cal-past]","[class.cal-today]","[class.cal-future]","[class.cal-weekend]","[class.cal-in-month]","[class.cal-out-month]","[style.backgroundColor]","CalendarSchedulerHeaderComponent","CalendarSchedulerEventComponent","renderer","checkEnableState","highlightEvent","unhighlightEvent","Renderer2","CalendarSchedulerEventTitleComponent","CalendarSchedulerEventContentComponent","CalendarSchedulerEventActionsComponent","a","when","onActionClick","action","onClick","setPrototypeOf","__proto__","p","hasOwnProperty","SchedulerEventTitleFormatter","_super","tslib_1.__extends","CalendarEventTitleFormatter","SchedulerEventTitlePipe","schedulerEventTitle","transform","titleType","Pipe","name","SchedulerDateFormatter","dayViewHour","_a","Intl","DateTimeFormat","weekViewTitle","year","month","firstDay","lastDay","firstDayMonth","lastDayMonth","firstDayYear","lastDayYear","prevMonthDate","prevMonthDay","daysInMonth","Math","abs","prevMonthYear","Number","nextMonthDate","nextMonthDay","nextMonthYear","anyDateInMonth","CalendarDateFormatter","SCHEDULER_CONFIG","InjectionToken","SchedulerModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","NgModule","imports","CommonModule","CalendarModule","declarations","exports","period","amount","week","addWeeks","addMonths","subDays","subWeeks","subMonths","startOfMonth","endOfMonth"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { CalendarModule } from 'angular-calendar';\r\nimport { CalendarSchedulerViewComponent } from './calendar-scheduler-view.component';\r\nimport { CalendarSchedulerCellComponent } from './calendar-scheduler-cell.component';\r\nimport { CalendarSchedulerHeaderComponent } from './calendar-scheduler-header.component';\r\nimport { CalendarSchedulerEventComponent } from './calendar-scheduler-event.component';\r\nimport { CalendarSchedulerEventTitleComponent } from './calendar-scheduler-event-title.component';\r\nimport { CalendarSchedulerEventContentComponent } from './calendar-scheduler-event-content.component';\r\nimport { CalendarSchedulerEventActionsComponent } from './calendar-scheduler-event-actions.component';\r\n\r\nimport { SchedulerEventTitlePipe } from './pipes/scheduler-event-title.pipe';\r\nimport { SchedulerDateFormatter } from './formatters/scheduler-date-formatter.provider';\r\nimport { SchedulerEventTitleFormatter } from './formatters/scheduler-event-title-formatter.provider';\r\n\r\nexport * from './calendar-scheduler-view.component';\r\nexport * from './formatters/scheduler-date-formatter.provider';\r\nexport * from './formatters/scheduler-event-title-formatter.provider';\r\nexport * from './pipes/scheduler-event-title.pipe';\r\nexport * from './calendar-utils';\r\n\r\nimport { SchedulerConfig } from './scheduler-config';\r\n\r\nexport const SCHEDULER_CONFIG = new InjectionToken('SchedulerConfig');\r\n\r\nexport function provideAuthConfig(config: SchedulerConfig) {\r\n    return new SchedulerConfig(config);\r\n}\r\n\r\n/**\r\n * The main module of this library. Example usage:\r\n *\r\n * ```typescript\r\n * import { CalenderModule } from 'angular-calendar';\r\n * import { SchedulerModule } from 'angular-calendar-scheduler';\r\n *\r\n * @NgModule({\r\n *   imports: [\r\n *     CalenderModule.forRoot(),\r\n *     SchedulerModule.forRoot({ locale: 'en', headerDateFormat: 'daysRange' })\r\n *   ]\r\n * })\r\n * class MyModule {}\r\n * ```\r\n *\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    CalendarModule.forRoot()\r\n  ],\r\n  declarations: [\r\n    CalendarSchedulerViewComponent,\r\n    CalendarSchedulerCellComponent,\r\n    CalendarSchedulerHeaderComponent,\r\n    CalendarSchedulerEventComponent,\r\n    CalendarSchedulerEventTitleComponent,\r\n    CalendarSchedulerEventContentComponent,\r\n    CalendarSchedulerEventActionsComponent,\r\n    SchedulerEventTitlePipe\r\n  ],\r\n  providers: [\r\n    SchedulerEventTitlePipe,\r\n    SchedulerEventTitleFormatter,\r\n    SchedulerDateFormatter\r\n  ],\r\n  exports: [\r\n    CalendarSchedulerViewComponent,\r\n    CalendarSchedulerCellComponent,\r\n    CalendarSchedulerHeaderComponent,\r\n    CalendarSchedulerEventComponent,\r\n    CalendarSchedulerEventTitleComponent,\r\n    CalendarSchedulerEventContentComponent,\r\n    CalendarSchedulerEventActionsComponent\r\n  ]\r\n})\r\nexport class SchedulerModule {\r\n  static forRoot(config?: SchedulerConfig): ModuleWithProviders {\r\n    return {\r\n        ngModule: SchedulerModule,\r\n        providers: [\r\n            { provide: SCHEDULER_CONFIG, useValue: config },\r\n            { provide: SchedulerConfig, useFactory: provideAuthConfig, deps: [SCHEDULER_CONFIG] }\r\n        ]\r\n    };\r\n}\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * Auth configuration.\r\n */\r\n@Injectable()\r\nexport class SchedulerConfig {\r\n    locale?: string = 'en';\r\n    headerDateFormat?: 'weekNumber' | 'daysRange' = 'daysRange';\r\n\r\n    constructor(config: SchedulerConfig = {}) {\r\n        function use<T>(source: T, defaultValue: T): T {\r\n            return config && source !== undefined ? source : defaultValue;\r\n        }\r\n\r\n        this.locale = use(config.locale, this.locale);\r\n        this.headerDateFormat = use(config.headerDateFormat, this.headerDateFormat);\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    ChangeDetectorRef,\r\n    OnChanges,\r\n    OnInit,\r\n    OnDestroy,\r\n    LOCALE_ID,\r\n    Inject,\r\n    TemplateRef,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport {\r\n    EventColor,\r\n    DayViewHour,\r\n    DayViewHourSegment\r\n} from 'calendar-utils';\r\nimport {\r\n    startOfMinute,\r\n    startOfDay,\r\n    startOfWeek,\r\n    endOfDay,\r\n    endOfWeek,\r\n    addMinutes,\r\n    addHours,\r\n    addDays,\r\n    subSeconds,\r\n    setMinutes,\r\n    setHours,\r\n    setDate,\r\n    setMonth,\r\n    setYear,\r\n    isSameSecond,\r\n    isSameDay,\r\n    getDay\r\n} from 'date-fns';\r\nimport { SchedulerConfig } from './scheduler-config';\r\n\r\n\r\nconst WEEKEND_DAY_NUMBERS = [0, 6];\r\nconst DAYS_IN_WEEK = 7;\r\nconst HOURS_IN_DAY = 24;\r\nconst MINUTES_IN_HOUR = 60;\r\nconst SECONDS_IN_DAY = 60 * 60 * 24;\r\n\r\nexport interface SchedulerView {\r\n    days: SchedulerViewDay[];\r\n}\r\n\r\nexport interface SchedulerViewDay {\r\n    date: Date;\r\n    isPast: boolean;\r\n    isToday: boolean;\r\n    isFuture: boolean;\r\n    isWeekend: boolean;\r\n    inMonth: boolean;\r\n    dragOver: boolean;\r\n    backgroundColor?: string;\r\n    cssClass?: string;\r\n    hours: SchedulerViewHour[];\r\n}\r\n\r\nexport interface SchedulerViewHour {\r\n    hour: DayViewHour;\r\n    date: Date;\r\n    segments: SchedulerViewHourSegment[];\r\n    isPast: boolean;\r\n    isFuture: boolean;\r\n    hasBorder: boolean;\r\n    backgroundColor?: string;\r\n    cssClass?: string;\r\n}\r\n\r\nexport interface SchedulerViewHourSegment {\r\n    segment: DayViewHourSegment;\r\n    date: Date;\r\n    events: CalendarSchedulerEvent[];\r\n    isPast: boolean;\r\n    isFuture: boolean;\r\n    isDisabled: boolean;\r\n    hasBorder: boolean;\r\n    backgroundColor?: string;\r\n    cssClass?: string;\r\n}\r\n\r\nexport interface CalendarSchedulerEvent {\r\n    id: string;\r\n    start: Date;\r\n    end?: Date;\r\n    title: string;\r\n    content?: string;\r\n    color: EventColor;\r\n    actions?: CalendarSchedulerEventAction[];\r\n    status?: CalendarSchedulerEventStatus;\r\n    cssClass?: string;\r\n    startsBeforeSegment?: boolean;\r\n    endsAfterSegment?: boolean;\r\n    isHovered?: boolean;\r\n    isDisabled?: boolean;\r\n    isClickable?: boolean;\r\n}\r\n\r\nexport type CalendarSchedulerEventStatus = 'ok' | 'warning' | 'danger';\r\n\r\nexport interface CalendarSchedulerEventAction {\r\n    when?: 'enabled' | 'disabled';\r\n    label: string;\r\n    title: string;\r\n    cssClass?: string;\r\n    onClick(event: CalendarSchedulerEvent): void;\r\n}\r\n\r\n // https://css-tricks.com/snippets/css/a-guide-to-flexbox/\r\n@Component({\r\n    selector: 'calendar-scheduler-view',\r\n    template: `\r\n        <div class=\"cal-scheduler-view\" #weekViewContainer>\r\n            <calendar-scheduler-header\r\n                [days]=\"headerDays\"\r\n                [locale]=\"locale\"\r\n                [customTemplate]=\"headerTemplate\"\r\n                (dayClicked)=\"dayClicked.emit($event)\">\r\n            </calendar-scheduler-header>\r\n\r\n            <div class=\"cal-scheduler\">\r\n                <div class=\"cal-scheduler-hour-rows aside\">\r\n                    <div class=\"cal-scheduler-hour align-center horizontal\" *ngFor=\"let hour of hours\">\r\n                      <div class=\"cal-scheduler-time\">\r\n                        <div class=\"cal-scheduler-hour-segment\" *ngFor=\"let segment of hour.segments\">\r\n                            {{ segment.date | calendarDate:'dayViewHour':locale }}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"cal-scheduler-cols aside\">\r\n                    <div class=\"cal-scheduler-col\" *ngFor=\"let day of view.days\">\r\n                        <calendar-scheduler-cell\r\n                            *ngFor=\"let hour of day.hours\"\r\n                            [ngClass]=\"day?.cssClass\"\r\n                            [day]=\"day\"\r\n                            [hour]=\"hour\"\r\n                            [locale]=\"locale\"\r\n                            [tooltipPlacement]=\"tooltipPlacement\"\r\n                            [showActions]=\"showActions\"\r\n                            [customTemplate]=\"cellTemplate\"\r\n                            [eventTemplate]=\"eventTemplate\"\r\n                            (click)=\"dayClicked.emit({date: day})\"\r\n                            (highlightSegment)=\"toggleSegmentHighlight($event.event, true)\"\r\n                            (unhighlightSegment)=\"toggleSegmentHighlight($event.event, false)\"\r\n                            (segmentClicked)=\"segmentClicked.emit({segment: $event.segment})\"\r\n                            (eventClicked)=\"eventClicked.emit({event: $event.event})\">\r\n                        </calendar-scheduler-cell>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    styles: [`.cal-scheduler-view .cal-scheduler-headers{display:flex;flex-flow:row wrap;margin-bottom:3px;border:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler-headers .aside{flex:1 0}.cal-scheduler-view .cal-scheduler-headers .aside.cal-header-clock{max-width:5em}.cal-scheduler-view .cal-scheduler-headers .cal-header{flex:1;text-align:center;padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cal-scheduler-view .cal-scheduler-headers .cal-header:not(:last-child){border-right:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler-headers .cal-header:hover{background-color:#ededed}.cal-scheduler-view .cal-scheduler-headers .cal-header.cal-today{background-color:#e8fde7}.cal-scheduler-view .cal-scheduler-headers .cal-header.cal-weekend span{color:#8b0000}.cal-scheduler-view .cal-scheduler-headers .cal-header span{font-weight:400;opacity:.5}.cal-scheduler-view .cal-scheduler,.cal-scheduler-view .cal-scheduler-headers .cal-header-cols{display:flex;flex-flow:row wrap}.cal-scheduler-view .cal-scheduler .aside{flex:1 0}.cal-scheduler-view .cal-scheduler .aside.cal-scheduler-hour-rows{max-width:5em}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows{width:auto!important;border:1px solid #e1e1e1;overflow:hidden;position:relative}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour{display:flex;height:7.25em}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour:nth-child(odd){background-color:#fafafa}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour:not(:last-child){border-bottom:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour .cal-scheduler-time{display:flex;flex-flow:column wrap;width:100%;font-weight:700;text-align:center}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour .cal-scheduler-time .cal-scheduler-hour-segment{flex:1 0}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour .cal-scheduler-time .cal-scheduler-hour-segment:hover{background-color:#ededed}.cal-scheduler-view .cal-scheduler .cal-scheduler-hour-rows .cal-scheduler-hour .cal-scheduler-time .cal-scheduler-hour-segment:not(:last-child){border-bottom:thin dashed #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols{display:flex;flex-flow:row wrap;border-top:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col{display:flex;flex-flow:column wrap;flex:1 0;border-right:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell{display:flex;flex-flow:column wrap;flex:1 0}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell.cal-today{background-color:#e8fde7}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell.cal-disabled{background-color:#eee;pointer-events:none}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell.cal-disabled .cal-scheduler-events{filter:opacity(50%);-webkit-filter:opacity(50%)}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments{display:flex;flex-flow:column wrap;flex:1 0;border-bottom:1px solid #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments.no-border{border-bottom:0!important}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments.cal-disabled{background-color:#eee;pointer-events:none}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments.cal-disabled .cal-scheduler-event{filter:opacity(50%);-webkit-filter:opacity(50%)}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment{flex:1 0;display:flex;flex-flow:column wrap}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment:not(.has-events):hover{background-color:#ededed}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment:not(:last-child){border-bottom:thin dashed #e1e1e1}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment.no-border{border-bottom:0!important}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment.cal-disabled{background-color:#eee;pointer-events:none}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events,.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container{flex:1 0;display:flex;flex-flow:column wrap}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event{flex:1 0;display:flex;flex-flow:row wrap;padding:0 10px;font-size:12px;margin:0 2px;line-height:30px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:all ease-out .2s;filter:brightness(100%);-webkit-filter:brightness(100%);-webkit-backface-visibility:hidden}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event.cal-starts-within-segment{border-top-left-radius:.3em;border-top-right-radius:.3em;margin-top:2px}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event.cal-ends-within-segment{border-bottom-left-radius:.3em;border-bottom-right-radius:.3em;margin-bottom:2px}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event.cal-disabled{background-color:gray!important;filter:grayscale(100%);-webkit-filter:grayscale(100%)}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event.cal-not-clickable{cursor:not-allowed!important}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event:not(.cal-disabled).hovered,.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event:not(.cal-disabled):hover{cursor:pointer;filter:brightness(80%);-webkit-filter:brightness(80%)}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container{position:relative;width:100%}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container .cal-scheduler-event-title{font-size:16px;font-weight:700}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container .cal-scheduler-event-status{position:absolute;top:25%;right:1%;width:16px;height:16px;background:grey;border-radius:50px;border:1px solid #000}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container .cal-scheduler-event-status.ok{background:green}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container .cal-scheduler-event-status.warning{background:orange}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-title-container .cal-scheduler-event-status.danger{background:red}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-content-container{width:100%}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-actions-container{flex:1 0;position:relative}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-actions-container .cal-scheduler-event-actions{position:absolute;bottom:5px;right:0}.cal-scheduler-view .cal-scheduler .cal-scheduler-cols .cal-scheduler-col .cal-scheduler-cell .cal-scheduler-segments .cal-scheduler-segment .cal-scheduler-events .cal-scheduler-event-container .cal-scheduler-event .cal-scheduler-event-actions-container .cal-scheduler-event-actions .cal-scheduler-event-action{text-decoration:none}`],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class CalendarSchedulerViewComponent implements OnChanges, OnInit, OnDestroy {\r\n    /**\r\n     * The current view date\r\n     */\r\n    @Input() viewDate: Date;\r\n\r\n    /**\r\n     * An array of events to display on view\r\n     */\r\n    @Input() events: CalendarSchedulerEvent[] = [];\r\n\r\n    /**\r\n     * The number of segments in an hour. Must be <= 6\r\n     */\r\n    @Input() hourSegments: number = 2;\r\n\r\n    /**\r\n     * An array of day indexes (0 = sunday, 1 = monday etc) that will be hidden on the view\r\n     */\r\n    @Input() excludeDays: number[] = [];\r\n\r\n    /**\r\n     * Specify if the first day of current scheduler view has to be today or the first day of the week\r\n     */\r\n    @Input() startsWithToday: boolean = false;\r\n\r\n    /**\r\n     * Specify if actions must be shown or not\r\n     */\r\n    @Input() showActions: boolean = true;\r\n\r\n    /**\r\n     * A function that will be called before each cell is rendered. The first argument will contain the calendar (day, hour or segment) cell.\r\n     * If you add the `cssClass` property to the cell it will add that class to the cell in the template\r\n     */\r\n    @Input() dayModifier: Function;\r\n    @Input() hourModifier: Function;\r\n    @Input() segmentModifier: Function;\r\n\r\n    /**\r\n     * An observable that when emitted on will re-render the current view\r\n     */\r\n    @Input() refresh: Subject<any>;\r\n\r\n    /**\r\n     * The locale used to format dates\r\n     */\r\n    @Input() locale: string;\r\n\r\n    /**\r\n     * The placement of the event tooltip\r\n     */\r\n    @Input() tooltipPlacement: string = 'bottom';\r\n\r\n    /**\r\n     * The start number of the week\r\n     */\r\n    @Input() weekStartsOn: number;\r\n\r\n    /**\r\n     * A custom template to use to replace the header\r\n     */\r\n    @Input() headerTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * A custom template to use to replace the day cell\r\n     */\r\n    @Input() cellTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * A custom template to use for week view events\r\n     */\r\n    @Input() eventTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * The precision to display events.\r\n     * `days` will round event start and end dates to the nearest day and `minutes` will not do this rounding\r\n     */\r\n    @Input() precision: 'days' | 'minutes' = 'days';\r\n\r\n    /**\r\n     * The day start hours in 24 hour time. Must be 0-23\r\n     */\r\n    @Input() dayStartHour: number = 0;\r\n\r\n    /**\r\n     * The day start minutes. Must be 0-59\r\n     */\r\n    @Input() dayStartMinute: number = 0;\r\n\r\n    /**\r\n     * The day end hours in 24 hour time. Must be 0-23\r\n     */\r\n    @Input() dayEndHour: number = 23;\r\n\r\n    /**\r\n     * The day end minutes. Must be 0-59\r\n     */\r\n    @Input() dayEndMinute: number = 59;\r\n\r\n    /**\r\n     * Called when a header week day is clicked\r\n     */\r\n    @Output() dayClicked: EventEmitter<{ date: Date }> = new EventEmitter<{ date: Date }>();\r\n\r\n    /**\r\n     * Called when the segment is clicked\r\n     */\r\n    @Output() segmentClicked: EventEmitter<{ segment: SchedulerViewHourSegment }> = new EventEmitter<{ segment: SchedulerViewHourSegment }>();\r\n\r\n    /**\r\n     * Called when the event is clicked\r\n     */\r\n    @Output() eventClicked: EventEmitter<{ event: CalendarSchedulerEvent }> = new EventEmitter<{ event: CalendarSchedulerEvent }>();\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    days: SchedulerViewDay[];\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    headerDays: SchedulerViewDay[];\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    view: SchedulerView;\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    refreshSubscription: Subscription;\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    hours: DayViewHour[] = [];\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    constructor(private cdr: ChangeDetectorRef, @Inject(LOCALE_ID) locale: string, private config: SchedulerConfig) {\r\n        this.locale = config.locale || locale;\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    ngOnInit(): void {\r\n        if (this.refresh) {\r\n            this.refreshSubscription = this.refresh.subscribe(() => {\r\n                this.refreshAll();\r\n                this.cdr.markForCheck();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    ngOnChanges(changes: any): void {\r\n        this.hours = this.getSchedulerViewHourGrid({\r\n            viewDate: this.viewDate,\r\n            hourSegments: this.hourSegments,\r\n            dayStart: {\r\n                hour: this.dayStartHour,\r\n                minute: this.dayStartMinute\r\n            },\r\n            dayEnd: {\r\n                hour: this.dayEndHour,\r\n                minute: this.dayEndMinute\r\n            }\r\n        });\r\n\r\n        if (changes.viewDate || changes.excludeDays) {\r\n            this.refreshHeader();\r\n        }\r\n\r\n        if (changes.events || changes.viewDate || changes.excludeDays || changes.dayStartHour || changes.dayEndHour || changes.dayStartMinute || changes.dayEndMinute) {\r\n            this.refreshBody();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    ngOnDestroy(): void {\r\n        if (this.refreshSubscription) {\r\n            this.refreshSubscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    toggleSegmentHighlight(event: CalendarSchedulerEvent, isHighlighted: boolean): void {\r\n        this.days.forEach((day: SchedulerViewDay) => {\r\n            day.hours.forEach((hour: SchedulerViewHour) => {\r\n                // hour.segments.forEach((segment: SchedulerViewHourSegment) => {\r\n                //    if (isHighlighted && segment.events.indexOf(event) > -1) {\r\n                //        segment.backgroundColor = event.color.secondary;\r\n                //    } else {\r\n                //        delete segment.backgroundColor;\r\n                //    }\r\n                // });\r\n                hour.segments.filter((segment: SchedulerViewHourSegment) => segment.events.some((ev: CalendarSchedulerEvent) => ev.id === event.id && ev.start.getDay() === event.start.getDay()))\r\n                    .forEach((segment: SchedulerViewHourSegment) => {\r\n                        segment.events.filter((ev: CalendarSchedulerEvent) => ev.id === event.id && ev.start.getDay() === event.start.getDay())\r\n                            .forEach((e: CalendarSchedulerEvent) => {\r\n                                if (isHighlighted) {\r\n                                    segment.backgroundColor = e.color.secondary;\r\n                                } else {\r\n                                    delete segment.backgroundColor;\r\n                                }\r\n                        });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private refreshHeader(): void {\r\n        this.headerDays = this.getSchedulerViewDays({\r\n            viewDate: this.viewDate,\r\n            weekStartsOn: this.weekStartsOn,\r\n            startsWithToday: this.startsWithToday,\r\n            excluded: this.excludeDays\r\n        });\r\n    }\r\n\r\n    private refreshBody(): void {\r\n        this.view = this.getSchedulerView({\r\n            events: this.events,\r\n            viewDate: this.viewDate,\r\n            weekStartsOn: this.weekStartsOn,\r\n            startsWithToday: this.startsWithToday,\r\n            excluded: this.excludeDays\r\n        });\r\n\r\n        if (this.dayModifier) {\r\n            this.days.forEach(day => this.dayModifier(day));\r\n        }\r\n\r\n        if (this.dayModifier || this.hourModifier || this.segmentModifier) {\r\n            this.view.days.forEach(day => {\r\n                if (this.dayModifier) {\r\n                    this.dayModifier(day);\r\n                }\r\n                day.hours.forEach((hour: SchedulerViewHour) => {\r\n                    if (this.hourModifier) {\r\n                        this.hourModifier(hour);\r\n                    }\r\n                    hour.segments.forEach((segment: SchedulerViewHourSegment) => {\r\n                        if (this.segmentModifier) {\r\n                            this.segmentModifier(segment);\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private refreshAll(): void {\r\n        this.refreshHeader();\r\n        this.refreshBody();\r\n    }\r\n\r\n\r\n    private getSchedulerView(args: GetSchedulerViewArgs): SchedulerView {\r\n        let events: CalendarSchedulerEvent[] = args.events || [];\r\n        const viewDate: Date = args.viewDate;\r\n        const weekStartsOn: number = args.weekStartsOn;\r\n        const startsWithToday: boolean = args.startsWithToday;\r\n        const excluded: number[] = args.excluded || [];\r\n        const precision: string = args.precision || 'days';\r\n\r\n        if (!events) {\r\n            events = [];\r\n        }\r\n\r\n        const startOfViewWeek: Date = startsWithToday ? startOfDay(viewDate) : startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\r\n        const endOfViewWeek: Date = startsWithToday ? addDays(endOfDay(viewDate), 6) : endOfWeek(viewDate, { weekStartsOn: weekStartsOn });\r\n        // let maxRange: number = DAYS_IN_WEEK - excluded.length;\r\n        const eventsInWeek: CalendarSchedulerEvent[] = this.getEventsInPeriod({ events: events, periodStart: startOfViewWeek, periodEnd: endOfViewWeek });\r\n\r\n        this.days = this.getSchedulerViewDays({\r\n            viewDate: viewDate,\r\n            weekStartsOn: weekStartsOn,\r\n            startsWithToday: startsWithToday,\r\n            excluded: excluded\r\n        });\r\n        this.days.forEach((day: SchedulerViewDay, dayIndex: number) => {\r\n            const hours: SchedulerViewHour[] = [];\r\n            this.hours.forEach((hour: DayViewHour, hourIndex: number) => {\r\n                const segments: SchedulerViewHourSegment[] = [];\r\n                hour.segments.forEach((segment: DayViewHourSegment, segmentIndex: number) => {\r\n                    segment.date = setDate(setMonth(setYear(segment.date, day.date.getFullYear()), day.date.getMonth()), day.date.getDate());\r\n\r\n                    const startOfSegment: Date = segment.date;\r\n                    const endOfSegment: Date = addMinutes(segment.date, MINUTES_IN_HOUR / this.hourSegments);\r\n\r\n                    const evts: CalendarSchedulerEvent[] = this.getEventsInPeriod({\r\n                        events: eventsInWeek,\r\n                        periodStart: startOfSegment,\r\n                        periodEnd: endOfSegment\r\n                    }).map((event: CalendarSchedulerEvent) =>\r\n                        <CalendarSchedulerEvent>{\r\n                            id: event.id,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            title: event.title,\r\n                            content: event.content,\r\n                            color: event.color,\r\n                            actions: event.actions,\r\n                            status: event.status,\r\n                            cssClass: event.cssClass,\r\n                            startsBeforeSegment: event.start < startOfSegment,\r\n                            endsAfterSegment: event.end > endOfSegment,\r\n                            isHovered: false,\r\n                            isDisabled: event.isDisabled || false,\r\n                            isClickable: event.isClickable !== undefined && event.isClickable !== null ? event.isClickable : true\r\n                        });\r\n                    segments.push(<SchedulerViewHourSegment>{\r\n                        segment: segment,\r\n                        date: new Date(segment.date),\r\n                        events: evts,\r\n                        hasBorder: true\r\n                    });\r\n                });\r\n\r\n                const hourDate: Date = new Date(day.date.getFullYear(), day.date.getMonth(), day.date.getDate(), hour.segments[0].date.getHours());\r\n                hours.push(<SchedulerViewHour>{ hour: hour, date: hourDate, segments: segments, hasBorder: true });\r\n            });\r\n            day.hours = hours;\r\n        });\r\n\r\n        return <SchedulerView>{\r\n            days: this.days\r\n        };\r\n    }\r\n\r\n\r\n    private isEventInPeriod(args: { event: CalendarSchedulerEvent, periodStart: string | number | Date, periodEnd: string | number | Date }): boolean {\r\n        const event: CalendarSchedulerEvent = args.event, periodStart: string | number | Date = args.periodStart, periodEnd: string | number | Date = args.periodEnd;\r\n        const eventStart: Date = event.start;\r\n        const eventEnd: Date = event.end || event.start;\r\n\r\n        if (eventStart > periodStart && eventStart < periodEnd) {\r\n            return true;\r\n        }\r\n        if (eventEnd > periodStart && eventEnd < periodEnd) {\r\n            return true;\r\n        }\r\n        if (eventStart < periodStart && eventEnd > periodEnd) {\r\n            return true;\r\n        }\r\n        if (isSameSecond(eventStart, periodStart) || isSameSecond(eventStart, subSeconds(periodEnd, 1))) {\r\n            return true;\r\n        }\r\n        if (isSameSecond(subSeconds(eventEnd, 1), periodStart) || isSameSecond(eventEnd, periodEnd)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private getEventsInPeriod(args: { events: CalendarSchedulerEvent[], periodStart: string | number | Date, periodEnd: string | number | Date }): CalendarSchedulerEvent[] {\r\n        const events: CalendarSchedulerEvent[] = args.events, periodStart: string | number | Date = args.periodStart, periodEnd: string | number | Date = args.periodEnd;\r\n        return events.filter((event) => this.isEventInPeriod({ event: event, periodStart: periodStart, periodEnd: periodEnd }));\r\n    }\r\n\r\n    private getSchedulerViewDays(args: GetSchedulerViewArgs): SchedulerViewDay[] {\r\n        const viewDate: Date = args.viewDate;\r\n        const weekStartsOn: number = args.weekStartsOn;\r\n        const startsWithToday: boolean = args.startsWithToday;\r\n        const excluded: number[] = args.excluded || [];\r\n\r\n        const start = startsWithToday ? new Date(viewDate) : startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\r\n        const days: SchedulerViewDay[] = [];\r\n        const loop = (i: number) => {\r\n            const date = addDays(start, i);\r\n            if (!excluded.some((e: number) => date.getDay() === e)) {\r\n                days.push(this.getSchedulerDay({ date: date }));\r\n            }\r\n        };\r\n        for (let i = 0; i < DAYS_IN_WEEK; i++) {\r\n            loop(i);\r\n        }\r\n        return days;\r\n    }\r\n\r\n    private getSchedulerDay(args: { date: Date }): SchedulerViewDay {\r\n        const date: Date = args.date;\r\n        const today: Date = startOfDay(new Date());\r\n\r\n        return <SchedulerViewDay>{\r\n            date: date,\r\n            isPast: date < today,\r\n            isToday: isSameDay(date, today),\r\n            isFuture: date > today,\r\n            isWeekend: WEEKEND_DAY_NUMBERS.indexOf(getDay(date)) > -1,\r\n            hours: []\r\n        };\r\n    }\r\n\r\n    private getSchedulerViewHourGrid(args: GetSchedulerViewHourGridArgs): DayViewHour[] {\r\n        const viewDate: Date = args.viewDate, hourSegments: number = args.hourSegments, dayStart: any = args.dayStart, dayEnd: any = args.dayEnd;\r\n        const hours: DayViewHour[] = [];\r\n\r\n        const startOfView: Date = setMinutes(setHours(startOfDay(viewDate), dayStart.hour), dayStart.minute);\r\n        const endOfView: Date = setMinutes(setHours(startOfMinute(endOfDay(viewDate)), dayEnd.hour), dayEnd.minute);\r\n        const segmentDuration: number = MINUTES_IN_HOUR / hourSegments;\r\n        const startOfViewDay: Date = startOfDay(viewDate);\r\n\r\n        const range = (start: number, end: number): number[] => Array.from({ length: ((end + 1) - start) }, (v, k) => k + start);\r\n        const hoursInView: number[] = range(dayStart.hour, dayEnd.hour);\r\n\r\n        // for (var i = 0; i < HOURS_IN_DAY; i++) {\r\n        hoursInView.forEach((hour: number, i: number) => {\r\n            const segments = [];\r\n            for (let j = 0; j < hourSegments; j++) {\r\n                const date = addMinutes(addHours(startOfViewDay, hour), j * segmentDuration);\r\n                if (date >= startOfView && date < endOfView) {\r\n                    segments.push({\r\n                        date: date,\r\n                        isStart: j === 0\r\n                    });\r\n                }\r\n            }\r\n            if (segments.length > 0) {\r\n                hours.push(<DayViewHour>{ segments: segments });\r\n            }\r\n        });\r\n        return hours;\r\n    }\r\n}\r\n\r\nexport interface GetSchedulerViewArgs {\r\n    events?: CalendarSchedulerEvent[];\r\n    viewDate: Date;\r\n    weekStartsOn: number;\r\n    startsWithToday: boolean;\r\n    excluded?: number[];\r\n    precision?: 'minutes' | 'days';\r\n}\r\n\r\nexport interface GetSchedulerViewHourGridArgs {\r\n    viewDate: Date;\r\n    hourSegments: number;\r\n    dayStart: any;\r\n    dayEnd: any;\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, TemplateRef, HostBinding } from '@angular/core';\r\nimport {\r\n    SchedulerViewDay,\r\n    SchedulerViewHour,\r\n    SchedulerViewHourSegment,\r\n    CalendarSchedulerEvent\r\n} from './calendar-scheduler-view.component';\r\n\r\n// WORKAROUND: https://github.com/dherges/ng-packagr/issues/217#issuecomment-339460255\r\nimport * as momentImported from 'moment';\r\nconst moment = momentImported;\r\n\r\n@Component({ // [class.no-border]': '!day.hasBorder\r\n    selector: 'calendar-scheduler-cell',\r\n    template: `\r\n        <ng-template #defaultTemplate>\r\n            <div class=\"cal-scheduler-segments\" *ngIf=\"hour.segments.length > 0\"\r\n                [ngClass]=\"hour?.cssClass\"\r\n                [class.no-border]=\"!hour.hasBorder\">\r\n                <div class=\"cal-scheduler-segment\"\r\n                    *ngFor=\"let segment of hour.segments; let si = index\"\r\n                    [title]=\"title\"\r\n                    [ngClass]=\"segment?.cssClass\"\r\n                    [class.has-events]=\"segment.events.length > 0\"\r\n                    [class.cal-disabled]=\"segment.isDisabled\"\r\n                    [style.backgroundColor]=\"segment.backgroundColor\"\r\n                    [class.no-border]=\"!segment.hasBorder\"\r\n                    (mwlClick)=\"onSegmentClick($event, segment)\">\r\n\r\n                    <div class=\"cal-scheduler-events\" *ngIf=\"segment.events.length > 0\">\r\n                        <calendar-scheduler-event\r\n                            *ngFor=\"let event of segment.events\"\r\n                            [day]=\"day\"\r\n                            [hour]=\"hour\"\r\n                            [segment]=\"segment\"\r\n                            [event]=\"event\"\r\n                            (mouseenter)=\"onMouseEnter($event, segment, event)\"\r\n                            (mouseleave)=\"onMouseLeave($event, segment, event)\"\r\n                            [tooltipPlacement]=\"tooltipPlacement\"\r\n                            [showActions]=\"showActions\"\r\n                            [customTemplate]=\"eventTemplate\"\r\n                            (eventClicked)=\"onEventClick($event, event)\">\r\n                        </calendar-scheduler-event>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template\r\n            [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\r\n            [ngTemplateOutletContext]=\"{\r\n                day: day,\r\n                hour: hour,\r\n                locale: locale,\r\n                tooltipPlacement: tooltipPlacement,\r\n                showActions: showActions,\r\n                eventTemplate: eventTemplate,\r\n                highlightSegment: highlightSegment,\r\n                unhighlightSegment: unhighlightSegment,\r\n                segmentClicked: segmentClicked,\r\n                eventClicked: eventClicked\r\n            }\">\r\n        </ng-template>\r\n    `,\r\n    host: {\r\n        'class': 'cal-scheduler-cell',\r\n        '[class.cal-past]': 'day.isPast',\r\n        '[class.cal-today]': 'day.isToday',\r\n        '[class.cal-future]': 'day.isFuture',\r\n        '[class.cal-weekend]': 'day.isWeekend',\r\n        '[class.cal-in-month]': 'day.inMonth',\r\n        '[class.cal-out-month]': '!day.inMonth',\r\n        '[style.backgroundColor]': 'day.backgroundColor'\r\n    }\r\n})\r\nexport class CalendarSchedulerCellComponent implements OnInit {\r\n\r\n    @Input() title: string;\r\n\r\n    @Input() day: SchedulerViewDay;\r\n\r\n    @Input() hour: SchedulerViewHour;\r\n\r\n    @Input() locale: string;\r\n\r\n    @Input() tooltipPlacement: string;\r\n\r\n    @Input() showActions: boolean = true;\r\n\r\n    @Input() customTemplate: TemplateRef<any>;\r\n\r\n    @Input() eventTemplate: TemplateRef<any>;\r\n\r\n    @Output() highlightSegment: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() unhighlightSegment: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() segmentClicked: EventEmitter<{ segment: SchedulerViewHourSegment }> = new EventEmitter<{ segment: SchedulerViewHourSegment }>();\r\n\r\n    @Output() eventClicked: EventEmitter<{ event: CalendarSchedulerEvent }> = new EventEmitter<{ event: CalendarSchedulerEvent }>();\r\n\r\n\r\n    ngOnInit(): void {\r\n        this.title = moment(this.day.date).format('dddd L');\r\n    }\r\n\r\n    onMouseEnter(mouseEvent: MouseEvent, segment: SchedulerViewHourSegment, event: CalendarSchedulerEvent): void {\r\n        if (!event.isDisabled && !segment.isDisabled) {\r\n            this.highlightSegment.emit({ event: event });\r\n        }\r\n    }\r\n\r\n    onMouseLeave(mouseEvent: MouseEvent, segment: SchedulerViewHourSegment, event: CalendarSchedulerEvent): void {\r\n        if (!event.isDisabled && !segment.isDisabled) {\r\n            this.unhighlightSegment.emit({ event: event });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    onSegmentClick(mouseEvent: MouseEvent, segment: SchedulerViewHourSegment): void {\r\n        if (mouseEvent.stopPropagation) {\r\n            mouseEvent.stopPropagation();\r\n        }\r\n\r\n        if (segment.events.length === 0) {\r\n            this.segmentClicked.emit({ segment: segment });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    onEventClick(mouseEvent: MouseEvent, event: CalendarSchedulerEvent): void {\r\n        if (mouseEvent.stopPropagation) {\r\n            mouseEvent.stopPropagation();\r\n        }\r\n        if (event.isClickable) {\r\n            this.eventClicked.emit({ event: event });\r\n        }\r\n    }\r\n}\r\n","import { Component, Input, Output, EventEmitter, TemplateRef } from '@angular/core';\r\nimport { SchedulerViewDay } from './calendar-scheduler-view.component';\r\n\r\n@Component({\r\n    selector: 'calendar-scheduler-header',\r\n    template: `\r\n        <ng-template #defaultTemplate>\r\n            <div class=\"cal-scheduler-headers\">\r\n                <div class=\"cal-header aside cal-header-clock align-center\">\r\n                    <i class=\"material-icons md-32\" style=\"margin:auto;\">schedule</i>\r\n                </div>\r\n\r\n                <div class=\"cal-header-cols aside\">\r\n                    <div\r\n                        class=\"cal-header\"\r\n                        *ngFor=\"let day of days\"\r\n                        [class.cal-past]=\"day.isPast\"\r\n                        [class.cal-today]=\"day.isToday\"\r\n                        [class.cal-future]=\"day.isFuture\"\r\n                        [class.cal-weekend]=\"day.isWeekend\"\r\n                        [class.cal-drag-over]=\"day.dragOver\"\r\n                        (mwlClick)=\"dayClicked.emit({date: day.date})\">\r\n                        <b>{{ day.date | calendarDate:'weekViewColumnHeader':locale }}</b><br>\r\n                        <span>{{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template\r\n            [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\r\n            [ngTemplateOutletContext]=\"{days: days, locale: locale, dayClicked: dayClicked}\">\r\n        </ng-template>\r\n    `\r\n})\r\nexport class CalendarSchedulerHeaderComponent {\r\n\r\n    @Input() days: SchedulerViewDay[];\r\n\r\n    @Input() locale: string;\r\n\r\n    @Input() customTemplate: TemplateRef<any>;\r\n\r\n    @Output() dayClicked: EventEmitter<{ date: Date }> = new EventEmitter<{ date: Date }>();\r\n}\r\n","import { Component, Input, Output, EventEmitter, TemplateRef, OnInit, Renderer2 } from '@angular/core';\r\nimport {\r\n    SchedulerViewDay,\r\n    SchedulerViewHour,\r\n    SchedulerViewHourSegment,\r\n    CalendarSchedulerEvent\r\n} from './calendar-scheduler-view.component';\r\nimport {\r\n    isSameDay\r\n} from 'date-fns';\r\n\r\n// WORKAROUND: https://github.com/dherges/ng-packagr/issues/217#issuecomment-339460255\r\nimport * as momentImported from 'moment';\r\nconst moment = momentImported;\r\n\r\n/**\r\n * [mwlCalendarTooltip]=\"event.title | calendarEventTitle:'weekTooltip':event\"\r\n * [tooltipPlacement]=\"tooltipPlacement\"\r\n */\r\n@Component({\r\n    selector: 'calendar-scheduler-event',\r\n    template: `\r\n        <ng-template #defaultTemplate>\r\n            <div\r\n                class=\"cal-scheduler-event\"\r\n                [title]=\"title\"\r\n                [class.cal-starts-within-segment]=\"!event.startsBeforeSegment\"\r\n                [class.cal-ends-within-segment]=\"!event.endsAfterSegment\"\r\n                [class.hovered]=\"event.isHovered\"\r\n                [class.cal-disabled]=\"event.isDisabled || segment.isDisabled\"\r\n                [class.cal-not-clickable]=\"!event.isClickable\"\r\n                [style.backgroundColor]=\"event.color.primary\"\r\n                [ngClass]=\"event?.cssClass\"\r\n                (mwlClick)=\"eventClicked.emit({event: event})\"\r\n                (mouseenter)=\"highlightEvent()\"\r\n                (mouseleave)=\"unhighlightEvent()\">\r\n                <calendar-scheduler-event-title *ngIf=\"!event.startsBeforeSegment\"\r\n                    [event]=\"event\"\r\n                    view=\"week\">\r\n                </calendar-scheduler-event-title>\r\n                <calendar-scheduler-event-content *ngIf=\"!event.startsBeforeSegment\"\r\n                    [event]=\"event\">\r\n                </calendar-scheduler-event-content>\r\n                <calendar-scheduler-event-actions [event]=\"event\" *ngIf=\"showActions && event.isClickable && !event.endsAfterSegment\"></calendar-scheduler-event-actions>\r\n                <calendar-scheduler-event-actions [event]=\"event\" *ngIf=\"showActions && event.isDisabled && !event.endsAfterSegment\"></calendar-scheduler-event-actions>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template\r\n            [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\r\n            [ngTemplateOutletContext]=\"{\r\n                day: day,\r\n                hour: hour,\r\n                segment: segment,\r\n                event: event,\r\n                tooltipPlacement: tooltipPlacement,\r\n                showActions: showActions,\r\n                customTemplate: customTemplate,\r\n                eventClicked: eventClicked\r\n            }\">\r\n        </ng-template>\r\n    `,\r\n    host: {\r\n        'class': 'cal-scheduler-event-container'\r\n    }\r\n})\r\nexport class CalendarSchedulerEventComponent implements OnInit {\r\n\r\n    @Input() title: string;\r\n\r\n    @Input() day: SchedulerViewDay;\r\n\r\n    @Input() hour: SchedulerViewHour;\r\n\r\n    @Input() segment: SchedulerViewHourSegment;\r\n\r\n    @Input() event: CalendarSchedulerEvent;\r\n\r\n    @Input() tooltipPlacement: string;\r\n\r\n    @Input() showActions: boolean = true;\r\n\r\n    @Input() customTemplate: TemplateRef<any>;\r\n\r\n    @Output() eventClicked: EventEmitter<{ event: CalendarSchedulerEvent }> = new EventEmitter<{ event: CalendarSchedulerEvent }>();\r\n\r\n    constructor(private renderer: Renderer2) {   }\r\n\r\n    public ngOnInit(): void {\r\n        this.segment.hasBorder = this.hour.hasBorder = !this.event.endsAfterSegment;\r\n\r\n        this.title = moment(this.event.start).format('dddd L');\r\n\r\n        this.checkEnableState();\r\n    }\r\n\r\n    private checkEnableState(): void {\r\n        if (this.segment.isDisabled) {\r\n            this.day.hours.forEach((hour: SchedulerViewHour) => {\r\n                hour.segments.forEach((segment: SchedulerViewHourSegment) => {\r\n                    segment.events.filter((event: CalendarSchedulerEvent) => event.id === this.event.id && isSameDay(event.start, this.event.start))\r\n                        .forEach((event: CalendarSchedulerEvent) => {\r\n                            event.isDisabled = true;\r\n                        });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    highlightEvent(): void {\r\n        // let events: CalendarSchedulerEvent[] = this.day.hours\r\n        //    .filter(h => h.segments.some(s => s.events.some(e => e.id === this.event.id)))\r\n        //    .map(h =>\r\n        //        h.segments.map(s =>\r\n        //            s.events.filter(e => e.id === this.event.id)\r\n        //        ).reduce((prev, curr) => prev.concat(curr))\r\n        //    )\r\n        //    .reduce((prev, curr) => prev.concat(curr));\r\n\r\n        this.day.hours.forEach((hour: SchedulerViewHour) => {\r\n            hour.segments.forEach((segment: SchedulerViewHourSegment) => {\r\n                segment.events.filter((event: CalendarSchedulerEvent) => event.id === this.event.id && isSameDay(event.start, this.event.start))\r\n                    .forEach((event: CalendarSchedulerEvent) => {\r\n                        event.isHovered = true;\r\n                    });\r\n            });\r\n        });\r\n    }\r\n\r\n    unhighlightEvent(): void {\r\n        this.day.hours.forEach((hour: SchedulerViewHour) => {\r\n            hour.segments.forEach((segment: SchedulerViewHourSegment) => {\r\n                segment.events.filter((event: CalendarSchedulerEvent) => event.id === this.event.id && isSameDay(event.start, this.event.start))\r\n                    .forEach((event: CalendarSchedulerEvent) => {\r\n                        event.isHovered = false;\r\n                    });\r\n            });\r\n        });\r\n    }\r\n\r\n    // private sameEventInPreviousHour(day: SchedulerViewDay, hour: SchedulerViewHour): CalendarSchedulerEvent {\r\n    //    let hourIndex: number = day.hours.indexOf(hour);\r\n    //    let previousHour = day.hours[hourIndex - 1];\r\n    //    if (previousHour) {\r\n    //        let previousSegment: SchedulerViewHourSegment = previousHour.segments[previousHour.segments.length - 1];\r\n    //        return previousSegment.events[previousSegment.events.length - 1];\r\n    //    }\r\n    //    return null;\r\n    // }\r\n\r\n    // private sameEventInPreviousSegment(segmentIndex: number): CalendarSchedulerEvent {\r\n    //    let previousSegment: SchedulerViewHourSegment = this.hour.segments[segmentIndex - 1];\r\n    //    if (previousSegment) {\r\n    //        return previousSegment.events[previousSegment.events.length - 1];\r\n    //    }\r\n    //    return null;\r\n    // }\r\n\r\n    // private sameEventInNextHour(): CalendarSchedulerEvent {\r\n    //    let hourIndex: number = this.day.hours.indexOf(this.hour);\r\n    //    let nextHour: SchedulerViewHour = this.day.hours[hourIndex + 1];\r\n    //    if (nextHour) {\r\n    //        let nextSegment: SchedulerViewHourSegment = nextHour.segments[0];\r\n    //        return nextSegment.events[0];\r\n    //    }\r\n    //    return null;\r\n    // }\r\n\r\n    // private sameEventInNextSegment(segmentIndex: number): CalendarSchedulerEvent {\r\n    //    let nextSegment: SchedulerViewHourSegment = this.hour.segments[segmentIndex + 1];\r\n    //    if (nextSegment) {\r\n    //        return nextSegment.events[0];\r\n    //    }\r\n    //    return null;\r\n    // }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport {\r\n    CalendarSchedulerEvent\r\n} from './calendar-scheduler-view.component';\r\n\r\n@Component({\r\n    selector: 'calendar-scheduler-event-title',\r\n    template: `\r\n        <div\r\n            class=\"cal-scheduler-event-title\"\r\n            [innerHTML]=\"event.title | schedulerEventTitle:view:event\">\r\n        </div>\r\n        <div *ngIf=\"event.status\"\r\n            class=\"cal-scheduler-event-status\"\r\n            [class.ok]=\"event.status === 'ok'\"\r\n            [class.warning]=\"event.status === 'warning'\"\r\n            [class.danger]=\"event.status === 'danger'\">\r\n        </div>\r\n    `,\r\n    host: {\r\n        'class': 'cal-scheduler-event-title-container'\r\n    }\r\n})\r\nexport class CalendarSchedulerEventTitleComponent {\r\n\r\n    @Input() event: CalendarSchedulerEvent;\r\n\r\n    @Input() view: string;\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport {\r\n    CalendarSchedulerEvent\r\n} from './calendar-scheduler-view.component';\r\n\r\n@Component({\r\n    selector: 'calendar-scheduler-event-content',\r\n    template: `\r\n        <div *ngIf=\"event.content\"\r\n            class=\"cal-scheduler-event-content\"\r\n            [innerHTML]=\"event.content\">\r\n        </div>\r\n    `,\r\n    host: {\r\n        'class': 'cal-scheduler-event-content-container'\r\n    }\r\n})\r\nexport class CalendarSchedulerEventContentComponent {\r\n\r\n    @Input() event: CalendarSchedulerEvent;\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport {\r\n    CalendarSchedulerEvent,\r\n    CalendarSchedulerEventAction\r\n} from './calendar-scheduler-view.component';\r\n\r\n@Component({\r\n    selector: 'calendar-scheduler-event-actions',\r\n    template: `\r\n        <span *ngIf=\"event.actions\" class=\"cal-scheduler-event-actions\">\r\n            <a\r\n                class=\"cal-scheduler-event-action\"\r\n                href=\"javascript:;\"\r\n                *ngFor=\"let action of actions\"\r\n                (mwlClick)=\"onActionClick($event, action, event)\"\r\n                [ngClass]=\"action.cssClass\"\r\n                [innerHtml]=\"action.label\"\r\n                [title]=\"action.title\">\r\n            </a>\r\n        </span>\r\n    `,\r\n    host: {\r\n        'class': 'cal-scheduler-event-actions-container'\r\n    }\r\n})\r\nexport class CalendarSchedulerEventActionsComponent implements OnInit {\r\n\r\n    @Input() event: CalendarSchedulerEvent;\r\n\r\n    public actions: CalendarSchedulerEventAction[] = [];\r\n\r\n    public ngOnInit(): void {\r\n        this.actions = this.event.isDisabled ?\r\n            this.event.actions.filter((a: CalendarSchedulerEventAction) => !a.when || a.when === 'disabled') :\r\n            this.event.actions.filter((a: CalendarSchedulerEventAction) => !a.when || a.when === 'enabled');\r\n    }\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    onActionClick(mouseEvent: MouseEvent, action: CalendarSchedulerEventAction, event: CalendarSchedulerEvent): void {\r\n        if (mouseEvent.stopPropagation) {\r\n            mouseEvent.stopPropagation();\r\n        }\r\n\r\n        action.onClick(event);\r\n    }\r\n}\r\n","import { CalendarEventTitleFormatter } from 'angular-calendar';\r\n\r\nexport class SchedulerEventTitleFormatter extends CalendarEventTitleFormatter {\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { CalendarSchedulerEvent } from '../calendar-scheduler-view.component';\r\nimport { SchedulerEventTitleFormatter } from '../formatters/scheduler-event-title-formatter.provider';\r\n\r\n@Pipe({\r\n  name: 'schedulerEventTitle'\r\n})\r\nexport class SchedulerEventTitlePipe implements PipeTransform {\r\n  constructor(private schedulerEventTitle: SchedulerEventTitleFormatter) {}\r\n\r\n  transform(title: string, titleType: string, event: CalendarSchedulerEvent): string {\r\n    return this.schedulerEventTitle[titleType](event);\r\n  }\r\n}\r\n","import { CalendarDateFormatter, DateFormatterParams } from 'angular-calendar';\r\n\r\nexport class SchedulerDateFormatter extends CalendarDateFormatter {\r\n\r\n    /**\r\n     * The time formatting down the left hand side of the day view\r\n     */\r\n    public dayViewHour({ date, locale }: DateFormatterParams): string {\r\n        return new Intl.DateTimeFormat(locale, { hour: 'numeric', minute: 'numeric' }).format(date);\r\n    }\r\n\r\n    public weekViewTitle({ date, locale }: DateFormatterParams): string {\r\n        // http://generatedcontent.org/post/59403168016/esintlapi\r\n        const year: string = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(date);\r\n        const month: string = new Intl.DateTimeFormat(locale, { month: 'short' }).format(date);\r\n\r\n        // var firstDay: number = date.getDate() - date.getDay() + 1; // First day is the day of the month - the day of the week\r\n        let firstDay: number = date.getDate();\r\n        if (date.getDay() === 0) {\r\n            firstDay += 1;\r\n        }\r\n\r\n        let lastDay: number = firstDay + 6; // last day is the first day + 6\r\n\r\n        let firstDayMonth: string = month;\r\n        let lastDayMonth: string = month;\r\n\r\n        let firstDayYear: string = year;\r\n        let lastDayYear: string = year;\r\n\r\n        if (firstDay < 1) {\r\n            const prevMonthDate: Date = new Date(date.getFullYear(), date.getMonth() - 1);\r\n            firstDayMonth = new Intl.DateTimeFormat(locale, { month: 'short' }).format(prevMonthDate);\r\n            const daysInPrevMonth: number = this.daysInMonth(prevMonthDate);\r\n\r\n            let i: number = 0;\r\n            let prevMonthDay: number = daysInPrevMonth;\r\n            for (i = 0; i < Math.abs(firstDay); i++) {\r\n                prevMonthDay--;\r\n            }\r\n            firstDay = prevMonthDay;\r\n\r\n            const prevMonthYear: string = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(prevMonthDate);\r\n            if (Number(prevMonthYear) < Number(year)) {\r\n                firstDayYear = prevMonthYear;\r\n            }\r\n        }\r\n\r\n        const daysInMonth: number = this.daysInMonth(date);\r\n        if (lastDay > daysInMonth) {\r\n            const nextMonthDate: Date = new Date(date.getFullYear(), date.getMonth() + 1);\r\n            lastDayMonth = new Intl.DateTimeFormat(locale, { month: 'short' }).format(nextMonthDate);\r\n\r\n            let i: number = 0;\r\n            let nextMonthDay: number = 0;\r\n            for (i = 0; i < (lastDay - daysInMonth); i++) {\r\n                nextMonthDay++;\r\n            }\r\n            lastDay = nextMonthDay;\r\n\r\n            const nextMonthYear: string = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(nextMonthDate);\r\n            if (Number(nextMonthYear) > Number(year)) {\r\n                lastDayYear = nextMonthYear;\r\n            }\r\n        }\r\n\r\n        return `${firstDay}` + (firstDayMonth !== lastDayMonth ? ' ' + firstDayMonth : '') +\r\n            (firstDayYear !== lastDayYear ? ' ' + firstDayYear : '') +\r\n            ` - ${lastDay} ${lastDayMonth} ${lastDayYear}`;\r\n    }\r\n\r\n    private daysInMonth(anyDateInMonth: Date): number {\r\n        return new Date(anyDateInMonth.getFullYear(), anyDateInMonth.getMonth() + 1, 0).getDate();\r\n    }\r\n}\r\n","import {\r\n    startOfDay,\r\n    startOfWeek,\r\n    startOfMonth,\r\n    endOfDay,\r\n    endOfWeek,\r\n    endOfMonth,\r\n    addDays,\r\n    addWeeks,\r\n    addMonths,\r\n    subDays,\r\n    subWeeks,\r\n    subMonths\r\n} from 'date-fns';\r\n\r\nexport type CalendarPeriod = 'day' | 'week' | 'month';\r\n\r\nexport function addPeriod(period: CalendarPeriod, date: Date, amount: number): Date {\r\n    return {\r\n        day: addDays,\r\n        week: addWeeks,\r\n        month: addMonths\r\n    }[period](date, amount);\r\n}\r\n\r\nexport function subPeriod(period: CalendarPeriod, date: Date, amount: number): Date {\r\n    return {\r\n        day: subDays,\r\n        week: subWeeks,\r\n        month: subMonths\r\n    }[period](date, amount);\r\n}\r\n\r\nexport function startOfPeriod(period: CalendarPeriod, date: Date): Date {\r\n    return {\r\n        day: startOfDay,\r\n        week: startOfWeek,\r\n        month: startOfMonth\r\n    }[period](date);\r\n}\r\n\r\nexport function endOfPeriod(period: CalendarPeriod, date: Date): Date {\r\n    return {\r\n        day: endOfDay,\r\n        week: endOfWeek,\r\n        month: endOfMonth\r\n    }[period](date);\r\n}\r\n"]}